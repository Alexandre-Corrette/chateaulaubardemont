{{ define "main" }}

{{/* Hero */}}
<section class="px-4 py-8 md:px-8">
  <div class="mx-auto max-w-4xl">
    
    {{ $hero := resources.Get .Params.hero.image }}
    {{ with $hero }}
    <div class="overflow-hidden rounded shadow-md">
      <img 
        class="h-auto w-full object-cover" 
        src="{{ .RelPermalink }}" 
        alt="{{ $.Params.hero.alt | default $.Title }}"
        loading="eager"
      >
    </div>
    {{ end }}

    <div class="mt-10 text-center">
      <h1 class="font-serif text-4xl font-medium text-stone-800 md:text-5xl">
        {{ .Title }}
      </h1>
      {{ with .Params.subtitle }}
      <p class="mt-4 text-lg text-stone-600">{{ . }}</p>
      {{ end }}
    </div>

  </div>
</section>

{{/* Prestataires */}}
{{ with .Params.prestataires }}
<section class="px-4 py-16 md:px-8">
  <div class="mx-auto max-w-6xl">
    
    <div class="mb-12 text-center">
      <h2 class="flex items-center justify-center text-xs font-medium uppercase tracking-widest text-stone-600">
        <span>{{ .title }}</span>
        <span class="ml-4 h-0.5 w-10 bg-amber-400"></span>
      </h2>
      {{ with .description }}
      <p class="mx-auto mt-4 max-w-2xl text-stone-600">{{ . }}</p>
      {{ end }}
    </div>

    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {{ range .items }}
      <article class="group overflow-hidden rounded-lg border border-stone-200 bg-white shadow-sm transition hover:shadow-md">
        
        {{ $image := resources.Get .image }}
        {{ with $image }}
        <div class="aspect-[4/3] overflow-hidden">
          <img 
            src="{{ .RelPermalink }}" 
            alt="{{ $.name }}"
            class="h-full w-full object-cover transition duration-300 group-hover:scale-105"
          >
        </div>
        {{ end }}

        <div class="p-6">
          <span class="text-xs font-medium uppercase tracking-wider text-amber-500">
            {{ .category }}
          </span>
          <h3 class="mt-2 font-serif text-xl font-medium text-stone-800">
            {{ .name }}
          </h3>
          <p class="mt-3 text-sm leading-relaxed text-stone-600">
            {{ .description }}
          </p>
          
          <div class="mt-4 flex flex-wrap gap-4 text-sm text-stone-500">
            {{ with .phone }}
            <a href="tel:{{ . | replaceRE " " "" }}" class="flex items-center gap-1 transition hover:text-amber-500">
              <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"/>
              </svg>
              {{ . }}
            </a>
            {{ end }}
            {{ with .website }}
            <a href="{{ . }}" target="_blank" rel="noopener" class="flex items-center gap-1 transition hover:text-amber-500">
              <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"/>
              </svg>
              Site web
            </a>
            {{ end }}
          </div>
        </div>

      </article>
      {{ end }}
    </div>

  </div>
</section>
{{ end }}

{{/* Restaurants */}}
{{ with .Params.restaurants }}
<section class="border-t border-stone-200 px-4 py-16 md:px-8">
  <div class="mx-auto max-w-6xl">
    
    <div class="mb-12 text-center">
      <h2 class="flex items-center justify-center text-xs font-medium uppercase tracking-widest text-stone-600">
        <span>{{ .title }}</span>
        <span class="ml-4 h-0.5 w-10 bg-amber-400"></span>
      </h2>
      {{ with .description }}
      <p class="mx-auto mt-4 max-w-2xl text-stone-600">{{ . }}</p>
      {{ end }}
    </div>

    <div class="grid gap-8 md:grid-cols-2">
      {{ range .items }}
      <article class="group flex flex-col overflow-hidden rounded-lg border border-stone-200 bg-white shadow-sm transition hover:shadow-md md:flex-row">
        
        {{ $image := resources.Get .image }}
        {{ with $image }}
        <div class="aspect-[4/3] w-full overflow-hidden md:aspect-square md:w-1/3">
          <img 
            src="{{ .RelPermalink }}" 
            alt="{{ $.name }}"
            class="h-full w-full object-cover transition duration-300 group-hover:scale-105"
          >
        </div>
        {{ end }}

        <div class="flex flex-1 flex-col justify-center p-6">
          <span class="text-xs font-medium uppercase tracking-wider text-amber-500">
            {{ .type }}
          </span>
          <h3 class="mt-2 font-serif text-xl font-medium text-stone-800">
            {{ .name }}
          </h3>
          <p class="mt-2 text-sm leading-relaxed text-stone-600">
            {{ .description }}
          </p>
          
          <div class="mt-4 space-y-1 text-sm text-stone-500">
            {{ with .address }}
            <p class="flex items-start gap-2">
              <svg class="mt-0.5 h-4 w-4 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"/>
              </svg>
              {{ . }}
            </p>
            {{ end }}
            {{ with .phone }}
            <a href="tel:{{ . | replaceRE " " "" }}" class="flex items-center gap-2 transition hover:text-amber-500">
              <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"/>
              </svg>
              {{ . }}
            </a>
            {{ end }}
          </div>
          
          {{ with .price }}
          <p class="mt-3 text-sm font-medium text-stone-700">{{ . }}</p>
          {{ end }}
        </div>

      </article>
      {{ end }}
    </div>

  </div>
</section>
{{ end }}

{{/* Contenu additionnel */}}
{{ with .Content }}
<section class="border-t border-stone-200 py-16">
  <div class="mx-auto max-w-3xl px-4 text-center text-stone-700">
    {{ . }}
  </div>
</section>
{{ end }}

{{ end }}