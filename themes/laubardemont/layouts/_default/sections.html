{{ define "main" }}

{{/* Hero */}}
<section class="px-4 py-8 md:px-8">
  <div class="mx-auto max-w-4xl">
    
    {{ $hero := resources.Get .Params.hero.image }}
    {{ with $hero }}
    <div class="overflow-hidden rounded shadow-md">
      {{ partial "responsive-image.html" (dict "image" . "alt" ($.Params.hero.alt | default $.Title) "loading" "eager") }}
    </div>
    {{ end }}

    <div class="mt-10 text-center">
      <h1 class="font-serif text-4xl font-medium text-stone-800 md:text-5xl">
        {{ .Title }}
      </h1>
      {{ with .Params.subtitle }}
      <p class="mt-4 text-lg text-stone-600">{{ . }}</p>
      {{ end }}
      
      {{ with .Params.hero.cta }}
      <a 
        href="{{ .url | relURL }}" 
        class="mt-8 inline-block rounded-full bg-amber-400 px-10 py-4 text-sm font-medium uppercase tracking-widest text-stone-800 transition hover:bg-amber-500"
      >
        {{ .label }}
      </a>
      {{ end }}
    </div>

  </div>
</section>

{{/* Sections alternées */}}
{{ with .Params.sections }}
<section class="px-4 py-16 md:px-8">
  <div class="mx-auto max-w-5xl space-y-24">
    
    {{ range $index, $section := . }}
    <article class="grid items-center gap-8 md:grid-cols-2">
      
      {{/* Image */}}
      {{ $image := resources.Get $section.image }}
      {{ with $image }}
      <div class="{{ if (mod $index 2) }}md:order-2{{ end }}">
        <div class="overflow-hidden rounded-lg shadow-md">
          {{ partial "responsive-image.html" (dict "image" . "alt" $section.title "sizes" "(min-width: 768px) 50vw, 100vw") }}
        </div>
      </div>
      {{ end }}

      {{/* Contenu */}}
      <div class="{{ if (mod $index 2) }}md:order-1{{ end }}">
        {{ with $section.title }}
        <h2 class="font-serif text-2xl font-medium text-stone-800 md:text-3xl">
          {{ . }}
        </h2>
        {{ end }}
        <div class="mt-4 text-stone-600 leading-relaxed">
          {{ $section.content | markdownify }}
        </div>
      </div>

    </article>
    {{ end }}

  </div>
</section>
{{ end }}

{{/* Citation finale */}}
{{ with .Params.citation }}
<section class="px-4 py-20 md:px-8">
  <div class="mx-auto max-w-3xl text-center">
    <p class="font-serif text-2xl leading-relaxed text-stone-700 md:text-3xl {{ if .italic }}italic{{ end }}">
      {{ if .italic }}"{{ end }}{{ .text }}{{ if .italic }}"{{ end }}
    </p>
    {{ with .author }}
    <p class="mt-6 text-sm uppercase tracking-widest text-stone-500">— {{ . }}</p>
    {{ end }}
    {{ with .cta }}
    <a
      href="{{ .url | relURL }}"
      class="mt-10 inline-block rounded-full bg-amber-400 px-10 py-4 text-sm font-medium uppercase tracking-widest text-stone-800 transition hover:bg-amber-500"
    >
      {{ .label }}
    </a>
    {{ end }}
    {{ with site.Params.contact.phone }}
    <p class="mt-6 text-sm text-stone-500">
      ou appelez-nous au <a href="tel:{{ . | replaceRE " " "" }}" class="text-stone-700 underline transition hover:text-amber-500">{{ . }}</a>
    </p>
    {{ end }}
  </div>
</section>
{{ end }}

{{/* Contenu additionnel */}}
{{ with .Content }}
<section class="border-t border-stone-200 py-16">
  <div class="mx-auto max-w-3xl px-4 text-justify text-stone-700 leading-relaxed">
    {{ . }}
  </div>
</section>
{{ end }}

{{ end }}