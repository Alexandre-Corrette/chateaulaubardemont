{{ define "main" }}

{{/* Hero */}}
<section class="px-4 py-8 md:px-8">
  <div class="mx-auto max-w-4xl">
    
    {{ $hero := resources.Get .Params.hero.image }}
    {{ with $hero }}
    <div class="overflow-hidden rounded shadow-md">
      <img 
        class="h-auto w-full object-cover" 
        src="{{ .RelPermalink }}" 
        alt="{{ $.Params.hero.alt | default $.Title }}"
        loading="eager"
      >
    </div>
    {{ end }}

    <div class="mt-10 text-center">
      <h1 class="font-serif text-4xl font-medium text-stone-800 md:text-5xl">
        {{ .Title }}
      </h1>
      {{ with .Params.subtitle }}
      <p class="mt-4 text-lg text-stone-600">{{ . }}</p>
      {{ end }}
      
      {{ with .Params.hero.cta }}
      <a 
        href="{{ .url | relURL }}" 
        class="mt-8 inline-block rounded-full bg-amber-400 px-10 py-4 text-sm font-medium uppercase tracking-widest text-stone-800 transition hover:bg-amber-500"
      >
        {{ .label }}
      </a>
      {{ end }}
    </div>

  </div>
</section>

{{/* Sections */}}
<section class="px-4 py-16 md:px-8">
  <div class="mx-auto max-w-5xl space-y-24">
    
    {{ range $index, $page := .Pages.ByWeight }}
    <article class="grid items-center gap-8 md:grid-cols-2 {{ if (mod $index 2) }}md:flex-row-reverse{{ end }}">
      
      {{/* Image */}}
      {{ $image := resources.Get $page.Params.image }}
      {{ with $image }}
      <div class="{{ if (mod $index 2) }}md:order-2{{ end }}">
        <div class="overflow-hidden rounded-lg shadow-md">
          <img 
            src="{{ .RelPermalink }}" 
            alt="{{ $page.Title }}"
            class="h-auto w-full object-cover"
          >
        </div>
      </div>
      {{ end }}

      {{/* Contenu */}}
      <div class="{{ if (mod $index 2) }}md:order-1{{ end }}">
        <h2 class="font-serif text-2xl font-medium text-stone-800 md:text-3xl">
          {{ $page.Title }}
        </h2>
        <div class="mt-4 text-stone-600 leading-relaxed">
          {{ $page.Content }}
        </div>
      </div>

    </article>
    {{ end }}

  </div>
</section>

{{/* Contenu additionnel */}}
{{ with .Content }}
<section class="border-t border-stone-200 py-16">
  <div class="mx-auto max-w-3xl px-4 text-center text-stone-700">
    {{ . }}
  </div>
</section>
{{ end }}

{{ end }}